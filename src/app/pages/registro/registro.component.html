<div class="register-container">
  
  <div class="register-card">
    
    <div class="text-center mb-6">
      <h2 class="text-2xl font-bold text-gray-800">Crear Cuenta</h2>
      <p class="text-gray-500 text-sm">Completa tus datos para unirte</p>
    </div>

    <div class="photo-upload-section">
      <div class="avatar-wrapper" (click)="fileInput.click()">
        @if (previewUrl) {
            <img [src]="previewUrl" class="avatar-img">
        } @else {
            <div class="avatar-placeholder">
                <i-tabler name="camera" class="icon-32"></i-tabler>
                <span class="text-xs mt-1">Subir Foto</span>
            </div>
        }
        <div class="add-badge">
            <i-tabler name="plus" class="icon-12"></i-tabler>
        </div>
      </div>
      <input #fileInput type="file" hidden (change)="onFileSelected($event)" accept="image/*">
    </div>

    <form [formGroup]="Formulario" (ngSubmit)="submit()">
      
      <div class="form-grid">
        
        <mat-form-field appearance="outline" class="col-span-full">
            <mat-label>Nombre(s)</mat-label>
            <input matInput formControlName="nombre" required />
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Apellido Paterno</mat-label>
            <input matInput formControlName="apellido_paterno" required />
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Apellido Materno</mat-label>
            <input matInput formControlName="apellido_materno" required />
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Fecha de Nacimiento</mat-label>
            <input matInput [matDatepicker]="fecha_nacimiento" formControlName="fecha_nacimiento" required/>
            <mat-datepicker-toggle matIconSuffix [for]="fecha_nacimiento"></mat-datepicker-toggle>
            <mat-datepicker #fecha_nacimiento></mat-datepicker>
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Teléfono</mat-label>
            <input matInput type="tel" formControlName="telefono" required/>
            <mat-icon matSuffix>phone</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="outline" class="col-span-full">
            <mat-label>Correo Electrónico</mat-label>
            <input matInput type="email" formControlName="correo" required/>
            <mat-icon matSuffix>email</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Usuario</mat-label>
            <input matInput formControlName="usuario" required/>
            <mat-icon matSuffix>person</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Contraseña</mat-label>
            <input matInput [type]="hide ? 'password' : 'text'" formControlName="password" required>
            <button type="button" mat-icon-button matSuffix (click)="hide = !hide">
                <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
            </button>
        </mat-form-field>

        <div class="location-group col-span-full">
            <mat-form-field appearance="outline">
                <mat-label>País</mat-label>
                <mat-select formControlName="tbl_pais_id">
                    @for (pais of listas?.['pais']; track $index) {
                        <mat-option [value]="pais.id">{{pais.nombre}}</mat-option>
                    }
                </mat-select>
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Estado</mat-label>
                <mat-select formControlName="tbl_estado_id">
                    @for (estado of listas?.['estado']; track $index) {
                        <mat-option [value]="estado.id">{{estado.nombre}}</mat-option>
                    }
                </mat-select>
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Municipio</mat-label>
                <mat-select formControlName="tbl_municipio_id">
                    @for (municipio of listas?.['municipio']; track $index) {
                        <mat-option [value]="municipio.id">{{municipio.nombre}}</mat-option>
                    }
                </mat-select>
            </mat-form-field>
        </div>

      </div>

      <button type="submit" class="register-btn" mat-ripple [disabled]="Formulario.invalid">
        Crear Cuenta
      </button>

      <div class="footer-links">
        <span class="text-gray-500">¿Ya tienes cuenta?</span>
        <a routerLink="/login" class="login-link">Inicia Sesión</a>
      </div>

    </form>
  </div>
</div>